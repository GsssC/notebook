# 进程与线程
## 进程的概念
在多道程序环境下，多个程序并发执行，此时程序间失去封闭性，并具有间断性及不可再生性。为此引入了进程的概念，**以便更好的描述和控制程序的并发执行，实现操作系统的并发现和共享性**。

为了使参与并发执行的程序（含数据）能独立地运行，必须为之配置一个专门的数据结构--进程控制块（Process Control Block，PCB）。系统利用PCB来描述进程的基本状况和运行状态，进而控制和管理进程。相应地，由程序段、相关数据段和PCB三部分构成了进程映像（进程实体）。所谓创建进程，实质上是创建进程映像中的PCB；而撤销进程，实质上是撤销进程的PCB。值得注意点是，**进程映像是静态的，进程则是动态的**。

**进程映像(静态)=PCB+程序段+数据段**

**进程(概念上)=进程映像的运行过程，是系统进行资源分配和调度的一个独立单位**

##进程的特征
进程是由多程序的并发执行而引出的，它和程序是两个不同的概念。进程的基本特在是对比单个程序的顺序执行提出的，也是对进程管理提出的基本要求。
- 动态性
	进程是程序的一次执行，它有着创建、活动、暂停、终止等过程，具有一定的生命周期，是动态地产生、变化和消亡的。**动态性是进程的最基本特征**。
- 并发性
	指多个进程实体，同存于内存中，能在一段时间内同时运行，提高资源利用率
- 独立性
	进程实体是一个能独立有耐性、独立获得资源和独立接受调度的基本单位。凡未建立PCB的程序都不能作为一个独立的单位参与运行。
- 异步性
	由于进程的相互制约，使进程具有执行的间断性，即进程按各自独立的、不可预知的速度向前推荐。异步性会导致执行结果的不可再现性，为此，在操作系统中必须配置相应的进程同步机制。
- 结构性
	每个进程都配置一个PCB对其进行描述。从结构上看，进程实体是由程序段、数据段和进程控制段(PCB)三部分组成。
## 进程的状态与转换
进程在其生命周期内，由于系统中各进程之间的项目制约关系及系统的运行环境的变化，使得进程的状态也在不断地发生变化(一个进程会经历若干个不同状态)。通常进程有以下五种状态，前三种是进程的基本状态。
- 运行状态：进程正在处理机上运行。在单处理机环境下，每一时刻最多只有一个进程处于运行状态。
- 就绪状态：进程已处于准备运行的状态，即进程获得了除处理机之外的一切所需资源，一旦得到处理机即可运行
- 阻塞状态，又称等待状态：进程正在等待某一时间而暂停运行，如都能待某资源为可用（不包括处理机）或等待输入/输出完成。及时处理机空闲，该进程也不能运行。
- 创建状态：进程呢过正在被创建，尚未转到就绪状态。创建进程通常需要多个步骤：首先申请一个空白的PCB，并向PCB总填写一些控制和管理进程的信息；然后由系统为该进程分配运行时所需资源；最后把该进程转入到就绪状态
- 结束状态：进程正从系统中消失，则可能是进程正常结束或其他原因中断退出运行。但进程需要结束运行时，系统首先必须置该进程为结束状态，然后再进一步处理资源释放和回收等工作。

**就绪状态和等待状态的区别**：就绪状态缺少处理机，一旦得到处理机程序，进程即可继续运行。等待状态进程除了处理机，还需要其他资源或者等待某一事件。**把处理机和其他资源划分开来**是因为进程得到处理机的时间很短，但得到其他资源（如外设）的使用和分配或者某一个事件的发生（如I/O操作的完成）对应的事件相对来说很长。

创建->就绪\<-\<阻塞\<-\>运行->终止
## 进程控制
进程控制的程序段属于原语，在执行期间不允许中断，实现创建新进程、撤销已有进程、实现进程状态转换等功能。

- 进程的创建：父进程创建子进程，子进程可以继承父进程的所有的资源。当子进程被撤销时，归还所有资源至父进程，撤销父进程时，撤销其所有子进程。
